@using NGL.Web.Infrastructure.Security
@model NGL.Web.Models.Session.SessionWithSectionsModel

@{
    ViewBag.Title = @Model.Name;
}

<h2>@Model.Name</h2>
<ul class="list-inline">
    <li>
        <h4>Sections Created</h4>
    </li>
    @if ((User as NglPrincipal).HasAccessTo("courseGeneration", "create"))
    {
        <li class="pull-right">
            @Html.ActionLink("Create New", MVC.Section.Create(Model.Id), new {@class = "btn btn-primary"})
        </li>
    }
</ul>

<div>
    @for (int courseIndex = 0; courseIndex < Model.CourseRows.Count; courseIndex++)
    {
        <h4 class="panel panel-default course" data-toggle='collapse' data-parent="#accordion" href="#collapse-@courseIndex"><strong>@Model.CourseRows[courseIndex].Name</strong><i class="fa fa-caret-down arrow"></i></h4>

        <div id="collapse-@courseIndex" class="panel-collapse collapse">
        
            @for (int sectionIndex = 0; sectionIndex < Model.CourseRows[courseIndex].SectionRows.Count; sectionIndex++)
            {
                <div>
                    <dl class="dl-horizontal panel panel-default">
                        <dt>
                            @Html.DisplayNameFor(model => model.CourseRows[courseIndex].SectionRows[sectionIndex].UniqueSectionCode)
                        </dt>

                        <dd>
                            @Html.DisplayTextFor(model => model.CourseRows[courseIndex].SectionRows[sectionIndex].UniqueSectionCode)
                        </dd>
                        <dt>
                            @Html.DisplayNameFor(model => model.CourseRows[courseIndex].SectionRows[sectionIndex].ClassPeriod)
                        </dt>

                        <dd>
                            @Html.DisplayTextFor(model => model.CourseRows[courseIndex].SectionRows[sectionIndex].ClassPeriod)
                        </dd>
                        <dt>
                            @Html.DisplayNameFor(model => model.CourseRows[courseIndex].SectionRows[sectionIndex].Location)
                        </dt>

                        <dd>
                            @Html.DisplayTextFor(model => model.CourseRows[courseIndex].SectionRows[sectionIndex].Location)
                        </dd>
                    </dl>
                </div>
            }
        </div>
    }
</div>

@section Scripts {
    Ngl.shared.accordianArrows.init();
}
